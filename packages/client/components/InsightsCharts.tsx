import styled from '@emotion/styled'
import graphql from 'babel-plugin-relay/macro'
import {
  CategoryScale,
  Chart as ChartJS,
  ChartData,
  ChartOptions,
  Filler,
  LinearScale,
  LineElement,
  PointElement,
  SubTitle,
  TimeScale,
  TimeSeriesScale,
  Title,
  Tooltip
} from 'chart.js'
import 'chartjs-adapter-dayjs-3'
import React from 'react'
import {Line} from 'react-chartjs-2'
import {useFragment} from 'react-relay'
import {Elevation} from '../styles/elevation'
import {PALETTE} from '../styles/paletteV3'
import {FONT_FAMILY} from '../styles/typographyV2'
import {InsightsCharts_domain$key} from '../__generated__/InsightsCharts_domain.graphql'

ChartJS.register(
  CategoryScale,
  Filler,
  LineElement,
  PointElement,
  LinearScale,
  TimeScale,
  TimeSeriesScale,
  SubTitle,
  Title,
  Tooltip
)
ChartJS.defaults.font.family = FONT_FAMILY.SANS_SERIF

const ChartBlock = styled('div')({
  display: 'flex',
  flexWrap: 'wrap',
  width: '100%'
})

const HalfChartBlock = styled('div')({
  display: 'flex',
  flexWrap: 'wrap',
  width: '100%'
})

const HalfChartWrapper = styled('div')({
  margin: 8,
  marginLeft: 16,
  maxWidth: 476,
  backgroundColor: '#fff',
  boxShadow: Elevation.Z3,
  borderRadius: 4,
  width: '50%'
})

const FullChartWrapper = styled(HalfChartWrapper)({
  maxHeight: 312,
  maxWidth: 976,
  width: '100%'
})

const dummyDates = [
  '2016-10-25T14:05:44.300Z',
  '2016-10-26T19:54:33.625Z',
  '2016-11-01T14:05:15.886Z',
  '2016-11-08T15:08:23.169Z',
  '2016-11-15T15:02:48.051Z',
  '2016-11-22T15:05:33.555Z',
  '2016-11-29T15:03:28.227Z',
  '2016-12-06T15:03:17.936Z',
  '2016-12-13T15:08:18.318Z',
  '2016-12-20T15:08:02.851Z',
  '2017-01-03T16:04:55.956Z',
  '2017-01-18T23:07:42.108Z',
  '2017-01-23T23:05:26.059Z',
  '2017-01-30T23:03:48.061Z',
  '2017-02-06T23:03:07.981Z',
  '2017-02-09T00:03:29.236Z',
  '2017-02-13T23:03:09.970Z',
  '2017-02-21T15:04:30.104Z',
  '2017-02-27T23:06:04.763Z',
  '2017-03-06T23:03:24.609Z',
  '2017-03-13T22:09:12.667Z',
  '2017-03-20T22:20:24.941Z',
  '2017-03-27T22:04:33.030Z',
  '2017-04-03T22:04:51.854Z',
  '2017-04-10T22:04:41.531Z',
  '2017-04-18T15:03:10.563Z',
  '2017-04-25T15:03:56.203Z',
  '2017-05-02T21:06:14.050Z',
  '2017-05-09T14:29:31.129Z',
  '2017-05-09T15:03:43.137Z',
  '2017-05-11T16:57:43.255Z',
  '2017-05-16T15:04:08.733Z',
  '2017-05-23T15:01:48.369Z',
  '2017-05-30T15:04:51.963Z',
  '2017-06-06T15:04:09.775Z',
  '2017-06-13T15:03:31.900Z',
  '2017-06-13T15:07:31.637Z',
  '2017-06-13T15:56:00.968Z',
  '2017-06-20T15:03:23.789Z',
  '2017-06-27T15:05:42.541Z',
  '2017-07-05T15:09:57.591Z',
  '2017-07-11T15:05:13.974Z',
  '2017-07-18T15:10:05.912Z',
  '2017-07-25T15:02:47.869Z',
  '2017-08-01T15:04:25.867Z',
  '2017-08-08T15:04:36.717Z',
  '2017-08-15T15:06:51.095Z',
  '2017-08-22T15:05:44.979Z',
  '2017-08-29T18:14:05.448Z',
  '2017-08-31T21:43:31.927Z',
  '2017-09-05T15:04:02.177Z',
  '2017-09-06T23:53:14.914Z',
  '2017-09-11T15:05:23.429Z',
  '2017-09-20T16:12:58.851Z',
  '2017-09-26T15:05:25.054Z',
  '2017-10-03T15:06:36.528Z',
  '2017-10-10T15:02:58.968Z',
  '2017-10-17T15:02:42.339Z',
  '2017-10-24T15:05:08.156Z',
  '2017-10-31T15:03:04.059Z',
  '2017-11-07T21:06:12.556Z',
  '2017-11-08T19:00:20.647Z',
  '2017-11-09T00:35:34.832Z',
  '2017-11-10T18:41:57.971Z',
  '2017-11-14T16:02:10.400Z',
  '2017-11-21T16:02:05.025Z',
  '2017-11-28T16:05:56.267Z',
  '2017-11-30T23:26:23.976Z',
  '2017-12-05T16:06:41.472Z',
  '2017-12-12T16:02:34.048Z',
  '2017-12-19T16:07:17.107Z',
  '2018-01-02T16:03:47.822Z',
  '2018-01-09T16:03:12.188Z',
  '2018-01-16T16:02:34.692Z',
  '2018-01-23T16:04:51.130Z',
  '2018-01-30T16:04:05.203Z',
  '2018-02-06T16:04:30.120Z',
  '2018-02-13T16:04:08.937Z',
  '2018-02-20T16:04:33.708Z',
  '2018-02-22T19:29:04.183Z',
  '2018-02-27T16:03:26.346Z',
  '2018-03-06T16:02:35.345Z',
  '2018-03-13T15:03:38.739Z',
  '2018-03-20T15:03:47.826Z',
  '2018-03-27T15:03:13.803Z',
  '2018-04-03T15:03:43.564Z',
  '2018-04-09T15:04:42.388Z',
  '2018-04-16T15:04:36.171Z',
  '2018-04-18T22:06:12.711Z',
  '2018-04-18T22:56:44.060Z',
  '2018-04-23T15:00:49.528Z',
  '2018-04-30T15:03:08.164Z',
  '2018-05-01T00:30:00.934Z',
  '2018-05-07T15:02:11.685Z',
  '2018-05-14T15:03:41.880Z',
  '2018-05-14T16:04:00.594Z',
  '2018-05-17T16:15:36.527Z',
  '2018-05-21T16:04:16.789Z',
  '2018-05-24T16:03:12.724Z',
  '2018-05-29T15:03:39.631Z',
  '2018-06-01T18:03:44.024Z',
  '2018-06-04T15:04:31.867Z',
  '2018-06-11T15:02:22.042Z',
  '2018-06-18T15:03:16.448Z',
  '2018-06-25T15:03:04.829Z',
  '2018-06-25T15:37:39.362Z',
  '2018-07-02T15:04:55.667Z',
  '2018-07-09T15:04:07.708Z',
  '2018-07-16T15:04:11.970Z',
  '2018-07-20T18:04:16.539Z',
  '2018-07-24T15:03:58.448Z',
  '2018-07-31T15:03:24.577Z',
  '2018-08-06T16:36:31.158Z',
  '2018-08-07T15:01:55.533Z',
  '2018-08-08T07:31:50.958Z',
  '2018-08-14T15:01:58.177Z',
  '2018-08-14T15:05:38.701Z',
  '2018-08-17T17:02:19.173Z',
  '2018-08-21T15:02:42.010Z',
  '2018-08-28T15:05:46.354Z',
  '2018-08-31T17:03:22.822Z',
  '2018-09-04T14:43:03.985Z',
  '2018-09-11T15:06:07.224Z',
  '2018-09-14T20:00:18.779Z',
  '2018-09-18T15:03:41.713Z',
  '2018-09-25T15:03:31.616Z',
  '2018-09-27T02:23:17.179Z',
  '2018-10-09T15:03:41.652Z',
  '2018-10-12T18:34:13.718Z',
  '2018-10-16T15:03:44.401Z',
  '2018-10-23T15:01:36.692Z',
  '2018-10-26T18:32:44.588Z',
  '2018-10-30T15:03:37.655Z',
  '2018-11-01T22:20:34.285Z',
  '2018-11-05T16:02:44.675Z',
  '2018-11-09T19:34:41.677Z',
  '2018-11-13T16:03:39.203Z',
  '2018-11-19T12:28:52.693Z',
  '2018-11-20T16:01:56.051Z',
  '2018-11-27T17:02:19.510Z',
  '2018-12-04T17:03:10.519Z',
  '2018-12-06T17:33:36.017Z',
  '2018-12-11T17:03:32.808Z',
  '2018-12-18T17:02:05.516Z',
  '2018-12-21T16:03:49.539Z',
  '2019-01-02T17:02:36.624Z',
  '2019-01-08T17:03:34.108Z',
  '2019-01-15T17:02:44.504Z',
  '2019-01-18T19:34:35.383Z',
  '2019-01-22T17:04:28.515Z',
  '2019-01-29T17:04:16.925Z',
  '2019-02-01T19:33:04.351Z',
  '2019-02-04T16:44:09.173Z',
  '2019-02-12T16:04:35.337Z',
  '2019-02-15T23:02:59.241Z',
  '2019-02-19T15:32:24.608Z',
  '2019-02-21T00:24:33.429Z',
  '2019-02-26T17:03:07.496Z',
  '2019-03-01T23:04:59.320Z',
  '2019-03-05T17:05:55.778Z',
  '2019-03-12T16:03:13.913Z',
  '2019-03-19T18:25:23.577Z',
  '2019-03-26T16:32:40.430Z',
  '2019-04-02T16:05:17.895Z',
  '2019-04-09T16:02:42.137Z',
  '2019-04-10T22:55:26.639Z',
  '2019-04-16T16:02:19.952Z',
  '2019-04-23T17:36:30.993Z',
  '2019-04-26T18:30:16.524Z',
  '2019-04-30T16:02:23.755Z',
  '2019-05-07T16:02:14.821Z',
  '2019-05-10T18:34:19.616Z',
  '2019-05-14T16:01:42.967Z',
  '2019-05-21T16:02:27.332Z',
  '2019-05-23T01:21:18.122Z',
  '2019-05-24T18:36:08.801Z',
  '2019-05-28T16:08:43.417Z',
  '2019-06-04T16:02:53.684Z',
  '2019-06-07T18:36:57.063Z',
  '2019-06-11T16:02:55.457Z',
  '2019-06-18T16:03:01.247Z',
  '2019-06-21T18:33:33.982Z',
  '2019-06-25T16:02:32.712Z',
  '2019-07-02T16:02:56.186Z',
  '2019-07-03T17:33:06.494Z',
  '2019-07-09T16:01:53.802Z',
  '2019-07-16T16:05:11.998Z',
  '2019-07-23T16:02:21.592Z',
  '2019-07-23T17:02:12.559Z',
  '2019-07-25T00:58:43.990Z',
  '2019-07-30T16:05:17.514Z',
  '2019-08-06T16:04:21.181Z',
  '2019-08-09T18:33:31.371Z',
  '2019-08-13T16:01:33.750Z',
  '2019-08-20T16:08:00.659Z',
  '2019-08-27T16:02:02.798Z',
  '2019-09-03T16:02:01.110Z',
  '2019-09-10T16:04:26.884Z',
  '2019-09-17T16:01:31.767Z',
  '2019-09-24T16:03:49.690Z',
  '2019-10-01T16:02:15.601Z',
  '2019-10-08T16:03:41.174Z',
  '2019-10-15T16:01:54.779Z',
  '2019-10-22T14:49:47.173Z',
  '2019-10-29T16:05:02.801Z',
  '2019-11-05T17:05:15.435Z',
  '2019-11-12T17:02:47.071Z',
  '2019-11-19T17:02:30.640Z',
  '2019-11-26T17:05:54.337Z',
  '2019-12-03T17:05:53.853Z',
  '2019-12-06T20:15:35.481Z',
  '2019-12-10T17:04:01.939Z',
  '2019-12-17T17:01:37.492Z',
  '2020-01-07T17:03:43.681Z',
  '2020-01-14T17:00:28.071Z',
  '2020-01-14T17:05:08.060Z',
  '2020-01-17T16:47:47.279Z',
  '2020-01-21T17:02:41.401Z',
  '2020-01-28T17:01:50.983Z',
  '2020-01-29T23:04:51.859Z',
  '2020-02-03T03:58:08.232Z',
  '2020-02-03T03:59:41.313Z',
  '2020-02-04T17:00:28.769Z',
  '2020-02-11T17:03:40.033Z',
  '2020-02-18T17:03:23.745Z',
  '2020-02-24T06:13:39.940Z',
  '2020-02-25T17:02:52.096Z',
  '2020-02-25T17:03:01.497Z',
  '2020-03-03T17:03:44.183Z',
  '2020-03-06T17:36:45.752Z',
  '2020-03-10T16:01:20.831Z',
  '2020-03-10T17:24:11.849Z',
  '2020-03-17T15:59:51.528Z',
  '2020-03-24T16:02:01.111Z',
  '2020-03-26T16:03:01.219Z',
  '2020-03-31T16:04:32.536Z',
  '2020-04-07T16:02:09.963Z',
  '2020-04-14T16:03:10.551Z',
  '2020-04-17T20:03:27.521Z',
  '2020-04-21T16:05:12.771Z',
  '2020-04-21T20:04:01.781Z',
  '2020-04-24T20:51:23.777Z',
  '2020-04-28T16:03:04.124Z',
  '2020-04-30T20:19:19.213Z',
  '2020-05-05T16:02:02.423Z',
  '2020-05-12T16:22:58.578Z',
  '2020-05-12T16:52:36.296Z',
  '2020-05-15T20:04:04.846Z',
  '2020-05-19T16:02:08.302Z',
  '2020-05-19T18:24:31.341Z',
  '2020-05-26T16:02:41.775Z',
  '2020-05-26T17:08:57.625Z',
  '2020-05-29T20:00:03.864Z',
  '2020-06-02T16:04:03.615Z',
  '2020-06-09T16:01:23.794Z',
  '2020-06-12T20:02:44.135Z',
  '2020-06-16T16:05:16.589Z',
  '2020-06-23T16:07:05.677Z',
  '2020-06-23T22:02:11.387Z',
  '2020-06-25T21:50:38.155Z',
  '2020-06-30T17:04:39.636Z',
  '2020-07-14T17:03:40.510Z',
  '2020-07-21T17:02:44.740Z',
  '2020-07-21T19:58:13.707Z',
  '2020-07-24T18:59:09.228Z',
  '2020-07-24T20:04:19.351Z',
  '2020-07-28T17:02:54.116Z',
  '2020-08-04T17:03:00.308Z',
  '2020-08-07T17:06:49.289Z',
  '2020-08-11T17:03:17.231Z',
  '2020-08-11T17:03:51.049Z',
  '2020-08-18T17:00:56.018Z',
  '2020-08-21T17:05:18.713Z',
  '2020-08-25T17:02:20.197Z',
  '2020-08-26T18:11:24.984Z',
  '2020-09-01T17:00:31.869Z',
  '2020-09-03T17:05:06.676Z',
  '2020-09-08T17:02:03.352Z',
  '2020-09-10T17:01:20.073Z',
  '2020-09-15T17:02:01.537Z',
  '2020-09-18T16:14:39.643Z',
  '2020-09-22T17:04:29.866Z',
  '2020-09-29T17:03:24.556Z',
  '2020-10-01T20:19:27.834Z',
  '2020-10-06T17:01:46.457Z',
  '2020-10-06T21:57:50.350Z',
  '2020-10-12T21:44:10.969Z',
  '2020-10-13T17:01:51.556Z',
  '2020-10-14T20:03:36.030Z',
  '2020-10-27T17:05:02.781Z',
  '2020-10-27T17:18:14.010Z',
  '2020-11-03T18:02:49.576Z',
  '2020-11-10T18:04:16.404Z',
  '2020-11-17T18:03:25.403Z',
  '2020-11-17T18:19:48.980Z',
  '2020-11-17T19:16:24.136Z',
  '2020-11-24T18:02:01.411Z',
  '2020-12-01T18:08:58.222Z',
  '2020-12-01T20:17:42.393Z',
  '2020-12-08T17:29:13.152Z',
  '2020-12-08T18:04:28.702Z',
  '2020-12-08T20:15:32.677Z',
  '2020-12-14T22:51:59.807Z',
  '2020-12-15T18:03:14.475Z',
  '2020-12-15T22:35:17.999Z',
  '2020-12-15T22:39:22.742Z',
  '2020-12-22T18:02:56.557Z',
  '2021-01-05T18:02:45.685Z',
  '2021-01-11T21:31:08.023Z',
  '2021-01-12T18:02:42.169Z',
  '2021-01-14T21:56:06.433Z',
  '2021-01-19T18:02:37.344Z',
  '2021-01-26T18:03:34.549Z',
  '2021-01-29T18:03:24.789Z',
  '2021-02-02T18:05:10.361Z',
  '2021-02-04T20:21:14.254Z',
  '2021-02-09T16:06:36.642Z',
  '2021-02-09T18:10:20.867Z',
  '2021-02-16T18:06:19.188Z',
  '2021-02-16T18:23:41.585Z',
  '2021-02-23T18:04:50.410Z',
  '2021-03-02T18:05:28.511Z',
  '2021-03-05T16:48:49.825Z',
  '2021-03-15T21:44:17.526Z',
  '2021-03-15T21:55:38.531Z',
  '2021-03-16T17:04:24.395Z',
  '2021-03-16T17:21:48.693Z',
  '2021-03-23T17:02:55.732Z',
  '2021-03-23T17:04:59.130Z',
  '2021-03-30T17:01:51.950Z',
  '2021-03-30T17:02:00.965Z',
  '2021-04-06T17:04:54.079Z',
  '2021-04-07T16:18:55.525Z',
  '2021-04-07T16:56:50.946Z',
  '2021-04-08T17:20:04.036Z',
  '2021-04-08T17:26:47.595Z',
  '2021-04-13T17:02:39.553Z',
  '2021-04-13T17:29:24.884Z',
  '2021-04-13T17:31:05.850Z',
  '2021-04-20T16:57:55.973Z',
  '2021-04-27T17:02:01.539Z',
  '2021-04-27T17:29:43.811Z',
  '2021-04-29T03:55:26.357Z',
  '2021-05-04T17:03:48.694Z',
  '2021-05-07T18:16:54.060Z',
  '2021-05-10T15:36:38.182Z',
  '2021-05-10T19:55:27.551Z',
  '2021-05-11T16:06:14.507Z',
  '2021-05-12T22:49:02.720Z',
  '2021-05-17T20:53:17.537Z',
  '2021-05-18T16:03:44.222Z',
  '2021-05-19T18:21:35.799Z',
  '2021-05-25T15:59:40.483Z',
  '2021-05-25T16:18:46.072Z',
  '2021-06-01T16:04:09.356Z',
  '2021-06-01T16:04:47.680Z',
  '2021-06-08T15:34:49.547Z',
  '2021-06-08T16:00:46.812Z',
  '2021-06-08T18:42:33.039Z',
  '2021-06-15T16:03:16.294Z',
  '2021-06-22T16:02:33.343Z',
  '2021-06-29T16:03:27.031Z',
  '2021-06-29T16:29:47.304Z',
  '2021-07-06T16:03:43.329Z',
  '2021-07-06T16:23:55.356Z',
  '2021-07-13T16:00:29.906Z',
  '2021-07-13T16:54:08.856Z',
  '2021-07-13T17:13:36.290Z',
  '2021-07-14T20:18:20.624Z',
  '2021-07-20T16:02:54.662Z',
  '2021-07-20T16:31:05.335Z',
  '2021-07-22T15:32:30.306Z',
  '2021-07-27T16:03:45.215Z',
  '2021-08-03T16:04:50.812Z',
  '2021-08-05T22:24:22.949Z',
  '2021-08-10T16:03:04.588Z',
  '2021-08-17T16:01:33.574Z',
  '2021-08-17T16:20:16.266Z',
  '2021-08-23T16:42:37.137Z',
  '2021-08-24T16:01:58.791Z',
  '2021-08-31T16:03:44.354Z',
  '2021-08-31T17:29:27.285Z',
  '2021-09-07T16:03:35.969Z',
  '2021-09-14T16:02:40.559Z',
  '2021-09-14T18:05:22.105Z',
  '2021-09-21T16:02:08.697Z',
  '2021-09-28T16:02:26.578Z',
  '2021-10-05T16:01:33.935Z',
  '2021-10-05T16:33:09.783Z',
  '2021-10-12T02:36:42.861Z',
  '2021-10-12T02:38:12.575Z',
  '2021-10-12T16:01:45.080Z',
  '2021-10-12T16:29:53.938Z',
  '2021-10-14T17:10:45.874Z',
  '2021-10-14T20:25:09.890Z',
  '2021-10-19T16:02:17.964Z',
  '2021-10-19T18:08:42.313Z',
  '2021-10-19T18:09:31.358Z',
  '2021-10-22T22:55:27.571Z',
  '2021-10-26T16:01:22.232Z',
  '2021-10-28T13:13:35.993Z',
  '2021-10-28T22:21:36.452Z',
  '2021-11-02T16:00:35.848Z',
  '2021-11-03T22:05:21.607Z',
  '2021-11-09T16:59:37.231Z',
  '2021-11-09T19:47:36.274Z',
  '2021-11-16T16:59:12.085Z',
  '2021-11-23T17:03:27.208Z',
  '2021-11-23T19:41:26.699Z',
  '2021-11-30T16:29:11.824Z',
  '2021-11-30T17:03:24.873Z',
  '2021-12-07T17:05:06.744Z',
  '2021-12-07T17:45:56.452Z',
  '2021-12-09T19:02:55.128Z',
  '2021-12-14T17:01:30.243Z',
  '2021-12-21T17:03:39.547Z',
  '2022-01-04T17:02:59.343Z',
  '2022-01-04T20:03:43.711Z',
  '2022-01-06T18:36:09.778Z',
  '2022-01-11T17:02:24.055Z',
  '2022-01-18T17:02:56.481Z',
  '2022-01-18T17:40:22.642Z',
  '2022-01-25T08:27:57.374Z',
  '2022-01-25T17:00:59.776Z',
  '2022-01-25T19:04:31.893Z',
  '2022-01-25T19:06:16.644Z',
  '2022-01-25T19:08:34.982Z',
  '2022-01-25T19:36:46.013Z',
  '2022-01-25T19:37:10.343Z',
  '2022-01-27T10:20:41.915Z',
  '2022-02-03T22:13:27.590Z',
  '2022-02-03T23:56:52.409Z',
  '2022-02-04T01:06:00.009Z',
  '2022-02-08T17:01:45.562Z',
  '2022-02-08T17:38:26.920Z',
  '2022-02-08T21:01:06.058Z',
  '2022-02-15T17:02:06.870Z',
  '2022-02-22T17:05:23.691Z',
  '2022-02-22T17:25:25.972Z',
  '2022-02-23T03:12:43.931Z',
  '2022-03-01T17:01:41.617Z',
  '2022-03-01T17:02:04.151Z',
  '2022-03-01T23:39:12.383Z',
  '2022-03-14T16:38:33.014Z',
  '2022-03-15T16:05:16.092Z',
  '2022-03-15T22:24:08.938Z',
  '2022-03-17T17:43:37.264Z',
  '2022-03-22T16:01:36.908Z',
  '2022-03-22T22:19:20.784Z',
  '2022-03-23T16:34:50.397Z',
  '2022-04-04T17:04:16.999Z',
  '2022-04-06T13:45:21.601Z',
  '2022-04-18T17:02:54.062Z',
  '2022-04-22T17:42:32.037Z',
  '2022-04-25T17:05:02.609Z',
  '2022-04-26T19:07:29.999Z',
  '2022-05-02T17:06:37.023Z',
  '2022-05-03T15:51:21.192Z',
  '2022-05-05T16:21:14.293Z',
  '2022-05-09T17:05:53.943Z',
  '2022-05-11T18:53:20.555Z',
  '2022-05-18T16:26:13.235Z',
  '2022-05-18T16:30:20.603Z',
  '2022-05-20T20:33:23.668Z',
  '2022-05-25T18:07:59.547Z',
  '2022-05-25T18:38:58.323Z',
  '2022-05-30T22:20:49.913Z',
  '2022-05-31T17:14:12.773Z',
  '2022-06-06T16:34:07.605Z',
  '2022-06-06T17:04:31.772Z',
  '2022-06-07T21:35:02.378Z',
  '2022-06-10T20:12:26.203Z',
  '2022-06-13T17:03:28.969Z',
  '2022-06-13T19:43:55.742Z'
]

interface Props {
  domainRef: InsightsCharts_domain$key
}

const makeOptions = (title: string) => {
  const options: ChartOptions<'line'> = {
    responsive: true,
    maintainAspectRatio: false,
    elements: {
      point: {
        // point will clip on hover when radius is 0
        radius: 1,
        hoverRadius: 4
      }
    },
    layout: {
      padding: 16
    },
    scales: {
      x: {
        type: 'timeseries',
        time: {
          displayFormats: {
            month: 'MMM'
          },
          round: 'day',
          tooltipFormat: 'MMM DD'
        },
        grid: {
          display: false,
          drawBorder: false
        }
      },
      y: {
        grid: {
          display: false,
          drawBorder: false
        }
      }
    },
    interaction: {
      intersect: false,
      mode: 'index'
    },
    plugins: {
      tooltip: {
        enabled: true,
        displayColors: false,
        bodyAlign: 'center'
      },
      title: {
        display: true,
        text: title,
        font: {
          size: 20,
          weight: '400'
          // lineHeight: '28px'
        }
      }
      // subtitle: {
      //   color: PALETTE.FOREST_400,
      //   font: {
      //     weight: '600'
      //   },
      //   display: true,
      //   text: '3.21% in the last month'
      // }
    }
  }
  return options
}

const makeData = (data: any, borderColor: string, fillColor: string) => {
  const result: ChartData<'line'> = {
    datasets: [
      {
        data,
        borderColor,
        fill: {
          target: 'origin',
          above: fillColor
        }
      }
    ]
  }
  return result
}

const InsightsCharts = (props: Props) => {
  const {domainRef} = props
  const domain = useFragment(
    graphql`
      fragment InsightsCharts_domain on Company {
        organizations {
          teams {
            createdAt
          }
          organizationUsers {
            edges {
              node {
                user {
                  createdAt
                }
              }
            }
          }
        }
      }
    `,
    domainRef
  )
  const {organizations} = domain
  const userCreatedAts = organizations
    .map(({organizationUsers}) =>
      organizationUsers.edges.map((edge) => new Date(edge.node.user.createdAt).getTime())
    )
    .flat()
    .sort()
  const teams = organizations.map(({teams}) => teams).flat()
  const createdAts = teams.map(({createdAt}) => new Date(createdAt).getTime()).sort()

  const cumulativeCreatedAts = dummyDates.map((createdAt, idx) => ({
    x: new Date(createdAt).getTime(),
    y: idx + 1
  }))
  console.log({createdAts, cumulativeCreatedAts, userCreatedAts})
  const membersOptions = makeOptions('Members')
  const teamsOptions = makeOptions('Teams')
  const meetingsOptions = makeOptions('Meetings')
  const membersData = makeData(cumulativeCreatedAts, PALETTE.GRAPE_500, PALETTE.GRAPE_500_30)
  const teamsData = makeData(cumulativeCreatedAts, PALETTE.JADE_400, PALETTE.JADE_400_30)
  const meetingsData = makeData(cumulativeCreatedAts, PALETTE.SKY_500, PALETTE.SKY_500_30)

  return (
    <ChartBlock>
      <FullChartWrapper>
        <Line height={312} options={meetingsOptions} data={meetingsData} />
      </FullChartWrapper>
      <HalfChartBlock>
        <HalfChartWrapper>
          <Line height={312} options={membersOptions} data={membersData} />
        </HalfChartWrapper>
        <HalfChartWrapper>
          <Line height={312} options={teamsOptions} data={teamsData} />
        </HalfChartWrapper>
      </HalfChartBlock>
    </ChartBlock>
  )
}

export default InsightsCharts
